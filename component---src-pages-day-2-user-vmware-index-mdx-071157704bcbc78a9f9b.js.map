{"version":3,"sources":["webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.js","webpack:///./node_modules/gatsby-theme-carbon/src/templates/Default.js","webpack:///./src/pages/day2/UserVmware/index.mdx"],"names":["PageHeader","title","tabs","className","cx","pageHeader","withTabs","length","id","text","EditLink","relativePagePath","repositoryProp","repository","site","siteMetadata","baseUrl","subDirectory","href","branch","row","link","PageTabs","render","this","props","slug","currentTab","split","filter","Boolean","slice","pageTabs","map","tab","slugifiedTab","slugify","lower","selected","currentTabRegex","RegExp","replace","key","selectedItem","listItem","to","tabsContainer","list","React","Component","Default","pageContext","children","location","Title","frontmatter","titleType","theme","description","keywords","pathPrefix","pathname","Layout","homepage","pageTitle","pageDescription","pageKeywords","label","Main","padded","NextPrevious","BackToTopBtn","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-day-2-user-vmware-index-mdx-071157704bcbc78a9f9b.js","sourcesContent":["import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { pageHeader, withTabs, text } from './PageHeader.module.scss';\n\nconst PageHeader = ({ title, tabs = [] }) => (\n  <div className={cx(pageHeader, { [withTabs]: tabs.length })}>\n    <div className=\"bx--grid\">\n      <div className=\"bx--row\">\n        <div className=\"bx--col-lg-12\">\n          <h1 id=\"page-title\" className={text}>\n            {title}\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nPageHeader.propTypes = {\n  /**\n   * Specify the title for the page\n   */\n  title: PropTypes.node,\n};\n\nexport default PageHeader;\n","import EditLink from './EditLink';\n\nexport default EditLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport { link, row } from './EditLink.module.scss';\n\nconst EditLink = ({ relativePagePath, repository: repositoryProp }) => {\n  const {\n    site: {\n      siteMetadata: { repository },\n    },\n  } = useStaticQuery(graphql`\n    query REPOSITORY_QUERY {\n      site {\n        siteMetadata {\n          repository {\n            baseUrl\n            subDirectory\n            branch\n          }\n        }\n      }\n    }\n  `);\n\n  const { baseUrl, subDirectory, branch } = repositoryProp || repository;\n\n  const href = `${baseUrl}/edit/${branch}${subDirectory}/src/pages${relativePagePath}`;\n\n  return baseUrl ? (\n    <div className={`bx--row ${row}`}>\n      <div className=\"bx--col\">\n        <a className={link} href={href}>\n          Edit this page on GitHub\n        </a>\n      </div>\n    </div>\n  ) : null;\n};\n\nEditLink.propTypes = {\n  repository: PropTypes.shape({\n    baseUrl: PropTypes.string,\n    subDirectory: PropTypes.string,\n    branch: PropTypes.string,\n  }),\n  relativePagePath: PropTypes.string,\n};\n\nexport default EditLink;\n","import PageTabs from './PageTabs';\n\nexport default PageTabs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'gatsby';\nimport slugify from 'slugify';\nimport cx from 'classnames';\n\nimport {\n  tabsContainer,\n  list,\n  selectedItem,\n  listItem,\n  link,\n} from './PageTabs.module.scss';\n\nexport default class PageTabs extends React.Component {\n  static propTypes = {\n    tabs: PropTypes.array,\n    slug: PropTypes.string,\n  };\n\n  render() {\n    const { tabs, slug } = this.props;\n    const currentTab = slug\n      .split('/')\n      .filter(Boolean)\n      .slice(-1)[0];\n\n    const pageTabs = tabs.map(tab => {\n      const slugifiedTab = slugify(tab, { lower: true });\n      const selected = slugifiedTab === currentTab;\n      const currentTabRegex = new RegExp(`${currentTab}(?!-)`);\n      const href = slug.replace(currentTabRegex, slugifiedTab);\n      return (\n        <li key={tab} className={cx({ [selectedItem]: selected }, listItem)}>\n          <Link className={link} to={`${href}`}>\n            {tab}\n          </Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className={tabsContainer}>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col-lg-12 bx--col-no-gutter\">\n              <nav>\n                <ul className={list}>{pageTabs}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport slugify from 'slugify';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nimport BackToTopBtn from '../components/BackToTopBtn';\nimport Layout from '../components/Layout';\nimport PageHeader from '../components/PageHeader';\nimport EditLink from '../components/EditLink';\nimport NextPrevious from '../components/NextPrevious';\nimport PageTabs from '../components/PageTabs';\nimport Main from '../components/Main';\n\nconst Default = ({ pageContext, children, location, Title }) => {\n  const { frontmatter = {}, relativePagePath, titleType } = pageContext;\n  const { tabs, title, theme, description, keywords } = frontmatter;\n\n  // get the path prefix if it exists\n  const {\n    site: { pathPrefix },\n  } = useStaticQuery(graphql`\n    query PATH_PREFIX_QUERY {\n      site {\n        pathPrefix\n      }\n    }\n  `);\n\n  // let gatsby handle prefixing\n  const slug = pathPrefix\n    ? location.pathname.replace(pathPrefix, '')\n    : location.pathname;\n\n  const getCurrentTab = () => {\n    if (!tabs) return '';\n    return (\n      slug\n        .split('/')\n        .filter(Boolean)\n        .slice(-1)[0] || slugify(tabs[0], { lower: true })\n    );\n  };\n\n  const currentTab = getCurrentTab();\n  return (\n    <Layout\n      tabs={tabs}\n      homepage={false}\n      theme={theme}\n      pageTitle={title}\n      pageDescription={description}\n      pageKeywords={keywords}\n      titleType={titleType}\n    >\n      <PageHeader title={Title ? <Title /> : title} label=\"label\" tabs={tabs} />\n      {tabs && <PageTabs slug={slug} tabs={tabs} currentTab={currentTab} />}\n      <Main padded>\n        {children}\n        <EditLink relativePagePath={relativePagePath} />\n      </Main>\n      <NextPrevious\n        pageContext={pageContext}\n        location={location}\n        slug={slug}\n        tabs={tabs}\n        currentTab={currentTab}\n      />\n      <BackToTopBtn />\n    </Layout>\n  );\n};\n\nexport default Default;\n","import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/ibm-cloud-architecture/cloudpak8s/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{`IAM settings for OpenShift on VMware`}</h1>\n    <p>{`After you build your OCP cluster on VMware, by defauilt, the user `}<strong parentName=\"p\">{`kubeadmin`}</strong>{` exists on your cluster.  That is the only user and you can use it for temporary. When you login the OCP dashboard, you will see the warning message as shown in below. `}</p>\n    <img {...{\n      \"src\": \"/assets/img/day2/kubeadmin.png\",\n      \"alt\": \"kubeadmin\"\n    }}></img>\n    <p>{`On OpenShift on VMWare, several Identity Providers are supported such as `}<strong parentName=\"p\">{`Basic Authentication`}</strong>{`, `}<strong parentName=\"p\">{`LDAP`}</strong>{`, `}<strong parentName=\"p\">{`OpenID`}</strong>{`, `}<strong parentName=\"p\">{`HTPasswd`}</strong>{`, and others. To specify an identity provider, you must create a Custom Resource (CR) that describes that identity provider and add it to the cluster.  `}</p>\n    <p>{`The identity provider for OpenShift that is simplest to use is the HTPasswd identity provider, which uses user passwords stored in the cluster etcd storage as a secret. In this document, we will demonstrate how to add users with HTPasswd identity provider.　　`}</p>\n    <h2>{`Configuring an HTPasswd identity provider`}</h2>\n    <p>{`To define an HTPasswd identity provider you must perform the following steps:\n1. Create an htpasswd file to store the user and password information. Instructions are provided for `}<a parentName=\"p\" {...{\n        \"href\": \"#create-an-htpassword-file-on-macos\"\n      }}>{`MacOS`}</a>{` and `}<a parentName=\"p\" {...{\n        \"href\": \"#create-an-htpassword-file-on-linux\"\n      }}>{`Linux`}</a>{`.\n2. Create an OpenShift Container Platform secret to represent the htpasswd file.\n3. Define the HTPasswd identity provider resource.\n4. Apply the resource to the default OAuth configuration.  `}</p>\n    <h2>{`Create an htpasswd file`}</h2>\n    <p>{`To use the HTPasswd identity provider, you must generate a flat file that contains the user names and passwords for your cluster by using htpasswd.  `}</p>\n    <h3>{`Prerequisites`}</h3>\n    <p>{`Have access to the htpasswd utility. On Red Hat Enterprise Linux this is available by installing the httpd-tools package.  `}</p>\n    <h3>{`Procedure`}</h3>\n    <ol>\n      <li parentName=\"ol\">{`Create or update your flat file with a user name and hashed password:`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`$ htpasswd -c -B -b </path/to/users.htpasswd> <user_name> <password> \nThe command generates a hashed version of the password.\n`}</code></pre>\n    <ol {...{\n      \"start\": 2\n    }}>\n      <li parentName=\"ol\">{`Continue to add or update credentials to the file:`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`$ htpasswd -b </path/to/users.htpasswd> <user_name> <password>   \n`}</code></pre>\n    <p>{`NOTE: if updating an old file, drop the -c`}</p>\n    <h3>{`Create an htpasswd file on MacOS`}</h3>\n    <p>{`For example, we created an htpasswd file on Mac as follow.  `}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ htpasswd -c -B -b users.htpasswd kenueno MyPassword!\nAdding password for user kenueno\n$ \n$ htpasswd -b users.htpasswd rstoner MyPassword!\nAdding password for user rstoner\n$ \n`}</code></pre>\n    <h3>{`Create an htpasswd file on Linux`}</h3>\n    <p>{`Here is an example to create an htpasswd filed on Linux.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ touch htpasswd\n$ \n$ htpasswd -Bb htpasswd alice 'p4ssw0rd'\nAdding password for user alice\n$ \n$ htpasswd -Bb htpasswd bob 'p4ssw0rd'\nAdding password for user bob\n$ \n$ htpasswd -Bb htpasswd claire 'p4ssw0rd'\nAdding password for user claire\n$ \n`}</code></pre>\n    <p>{`Note that if you don’t have the htpasswd command on your linux (CentOS, in our case), here is how you install it.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`# yum install httpd-tools\nLoaded plugins: fastestmirror, langpacks\nLoading mirror speeds from cached hostfile\n * base: mirror.dal.nexril.net\n * epel: pubmirror2.math.uh.edu\n * extras: mirror.dal.nexril.net\n * updates: mirror.dal.nexril.net\nResolving Dependencies\n--> Running transaction check\n---> Package httpd-tools.x86_64 0:2.4.6-90.el7.centos will be installed\n--> Processing Dependency: libaprutil-1.so.0()(64bit) for package: httpd-tools-2.4.6-90.el7.centos.x86_64\n--> Processing Dependency: libapr-1.so.0()(64bit) for package: httpd-tools-2.4.6-90.el7.centos.x86_64\n--> Running transaction check\n---> Package apr.x86_64 0:1.4.8-5.el7 will be installed\n---> Package apr-util.x86_64 0:1.5.2-6.el7 will be installed\n--> Finished Dependency Resolution\n\nDependencies Resolved\n\n===============================================================================================================================================\n Package                            Arch                          Version                                    Repository                   Size\n===============================================================================================================================================\nInstalling:\n httpd-tools                        x86_64                        2.4.6-90.el7.centos                        base                         91 k\nInstalling for dependencies:\n apr                                x86_64                        1.4.8-5.el7                                base                        103 k\n apr-util                           x86_64                        1.5.2-6.el7                                base                         92 k\n\nTransaction Summary\n===============================================================================================================================================\nInstall  1 Package (+2 Dependent packages)\n\nTotal download size: 286 k\nInstalled size: 584 k\nIs this ok [y/d/N]: y\nDownloading packages:\n(1/3): httpd-tools-2.4.6-90.el7.centos.x86_64.rpm                                                                       |  91 kB  00:00:00     \n(2/3): apr-1.4.8-5.el7.x86_64.rpm                                                                                       | 103 kB  00:00:00     \n(3/3): apr-util-1.5.2-6.el7.x86_64.rpm                                                                                  |  92 kB  00:00:00     \n-----------------------------------------------------------------------------------------------------------------------------------------------\nTotal                                                                                                          650 kB/s | 286 kB  00:00:00     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : apr-1.4.8-5.el7.x86_64                                                                                                      1/3 \n  Installing : apr-util-1.5.2-6.el7.x86_64                                                                                                 2/3 \n  Installing : httpd-tools-2.4.6-90.el7.centos.x86_64                                                                                      3/3 \n  Verifying  : apr-1.4.8-5.el7.x86_64                                                                                                      1/3 \n  Verifying  : httpd-tools-2.4.6-90.el7.centos.x86_64                                                                                      2/3 \n  Verifying  : apr-util-1.5.2-6.el7.x86_64                                                                                                 3/3 \n\nInstalled:\n  httpd-tools.x86_64 0:2.4.6-90.el7.centos                                                                                                     \n\nDependency Installed:\n  apr.x86_64 0:1.4.8-5.el7                                            apr-util.x86_64 0:1.5.2-6.el7                                           \n\nComplete!\n# \n# which htpasswd\n/usr/bin/htpasswd\n# \n`}</code></pre>\n    <h2>{`Creating the HTPasswd Secret`}</h2>\n    <p>{`To use the HTPasswd identity provider, you must define a secret that contains the HTPasswd user file.  `}</p>\n    <h3>{`Prerequisites`}</h3>\n    <p>{`Create an HTPasswd file.  `}</p>\n    <h3>{`Procedure`}</h3>\n    <p>{`Create an OpenShift Container Platform Secret that contains the HTPasswd users file.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc create secret generic htpass-secret --from-file=htpasswd=</path/to/users.htpasswd> -n openshift-config\n`}</code></pre>\n    <p>{`In the previous example, we created a file called htpasswd.  We will create a scecret from that file as follow.  `}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc create secret generic htpasswd --from-file=htpasswd -n openshift-config\nsecret/htpasswd created\n$\n`}</code></pre>\n    <p>{`NOTE:\nCreate the manifest for the cluster secret. This is used by the authentication provider to read the individual credentials.\nThis as a dry run to create a file for the manifest because the secret should exist already. `}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc create secret generic htpasswd-secret --from-file=htpasswd=./openshift.htpasswd  --namespace openshift-config --dry-run  --output yaml > ./htpass-secret.yaml  \n`}</code></pre>\n    <p>{`Replace the existing secret, this could be done as a pipe from the previous command.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc replace --filename ./htpass-secret.yaml  \n`}</code></pre>\n    <p>{`Then, create a yaml file for the Custom Resource (CR) as follow.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ vi oauth-config.yaml\n$ cat oauth-config.yaml \napiVersion: config.openshift.io/v1\nkind: OAuth\nmetadata:\n  name: cluster\nspec:\n  identityProviders:\n  - name: Local Password\n    mappingMethod: claim\n    type: HTPasswd\n    htpasswd:\n      fileData:\n        name: htpasswd\n$ \n`}</code></pre>\n    <h3>{`Sample HTPasswd CR`}</h3>\n    <p>{`The following Custom Resource (CR) shows the parameters and acceptable values for an HTPasswd identity provider.\n`}<img parentName=\"p\" {...{\n        \"src\": \"/assets/img/day2/htpasswd_yaml.png\",\n        \"alt\": \"htpasswd_yaml\"\n      }}></img></p>\n    <h2>{`Apply the custom resource of identity provider to the default OAuth configuration`}</h2>\n    <p>{`Add an identity provider so your users can authenticate.  `}</p>\n    <h3>{`Prerequisites`}</h3>\n    <p>{`Create an OpenShift Container Platform cluster.\nCreate the Custom Resource (CR) for your identity providers.\nYou must be logged in as an administrator.  `}</p>\n    <h3>{`Procedure`}</h3>\n    <ol>\n      <li parentName=\"ol\">{`Apply the defined CR:  `}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc apply -f </path/to/CR>  \n`}</code></pre>\n    <p>{`or we can use oc replace as follow.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc replace -f oauth-config.yaml\noauth.config.openshift.io/cluster replaced\n`}</code></pre>\n    <p>{`Note: If a CR does not exist, oc apply creates a new CR and might trigger the following warning:  `}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`Warning: oc apply should be used on resources created by either oc create --save-config or oc apply\n`}</code></pre>\n    <p>{`In this case you can safely ignore this warning.  `}</p>\n    <ol {...{\n      \"start\": 2\n    }}>\n      <li parentName=\"ol\">{`Log in to the cluster as a user from your identity provider, entering the password when prompted.`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc login -u <username>  \n`}</code></pre>\n    <ol {...{\n      \"start\": 3\n    }}>\n      <li parentName=\"ol\">{`Confirm that the user logged in successfully, and display the user name.  `}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc whoami  \n`}</code></pre>\n    <h2>{`Configuring identity providers using the web console`}</h2>\n    <p>{`Configure your identity provider (IDP) through the web console instead of the CLI.  `}</p>\n    <h3>{`Prerequisites`}</h3>\n    <p>{`You must be logged in to the web console as a cluster administrator.  `}</p>\n    <h3>{`Procedure`}</h3>\n    <ol>\n      <li parentName=\"ol\">{`Navigate to Administration → Cluster Settings.`}</li>\n      <li parentName=\"ol\">{`Under the Global Configuration tab, click OAuth.  `}</li>\n    </ol>\n    <img {...{\n      \"src\": \"/assets/img/day2/htpasswd_GUI_1.png\",\n      \"alt\": \"htpasswd1\"\n    }}></img>\n    <ol {...{\n      \"start\": 3\n    }}>\n      <li parentName=\"ol\">{`Under the Identity Providers section, select your identity provider from the Add drop-down menu. `}</li>\n    </ol>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"/assets/img/day2/htpasswd_GUI_2.png\",\n        \"alt\": \"htpasswd2\"\n      }}></img>{`  `}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"/assets/img/day2/htpasswd_GUI_3.png\",\n        \"alt\": \"htpasswd3\"\n      }}></img>{`  `}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"/assets/img/day2/htpasswd_GUI_4.png\",\n        \"alt\": \"htpasswd4\"\n      }}></img>{`  `}</p>\n    <p>{`Note: You can specify multiple IDPs through the web console without overwriting existing IDPs.`}</p>\n    <p>{`Before adding the HTPasswd, the yml file was something like this.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`apiVersion: config.openshift.io/v1\nkind: OAuth\nmetadata:\n  annotations:\n    release.openshift.io/create-only: 'true'\n  creationTimestamp: '2019-11-21T04:10:10Z'\n  generation: 1\n  name: cluster\n  resourceVersion: '1755'\n  selfLink: /apis/config.openshift.io/v1/oauths/cluster\n  uid: cf3d67c0-0c14-11ea-bbad-005056a57cfd\nspec: {}\n`}</code></pre>\n    <p>{`After the HTPasswd was added, the yml file was updated as follow.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`apiVersion: config.openshift.io/v1\nkind: OAuth\nmetadata:\n  annotations:\n    release.openshift.io/create-only: 'true'\n  creationTimestamp: '2019-11-21T04:10:10Z'\n  generation: 2\n  name: cluster\n  resourceVersion: '3123929'\n  selfLink: /apis/config.openshift.io/v1/oauths/cluster\n  uid: cf3d67c0-0c14-11ea-bbad-005056a57cfd\nspec:\n  identityProviders:\n    - htpasswd:\n        fileData:\n          name: htpasswd-h89hn\n      mappingMethod: claim\n      name: htpasswd\n      type: HTPasswd\n`}</code></pre>\n    <p>{`We would like to mention one more thing.`}<br parentName=\"p\"></br>{`\n`}{`Here is the scenario.  We create 3 users such as “alice”, “bob”, and “clair” with htpasswd as follow.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ htpasswd -Bb htpasswd alice 'p4ssw0rd'\nAdding password for user alice\n$ htpasswd -Bb htpasswd bob 'p4ssw0rd'\nAdding password for user bob\n$ htpasswd -Bb htpasswd claire 'p4ssw0rd'\nAdding password for user claire\n$ oc --user=admin create secret generic htpasswd --from-file=htpasswd -n openshift-config\nsecret/htpasswd created\n$ vi oauth-config.yaml\n$ cat oauth-config.yaml \napiVersion: config.openshift.io/v1\nkind: OAuth\nmetadata:\n  name: cluster\nspec:\n  identityProviders:\n  - name: Local Password\n    mappingMethod: claim\n    type: HTPasswd\n    htpasswd:\n      fileData:\n        name: htpasswd\n$ oc --user=admin replace -f oauth-config.yaml\noauth.config.openshift.io/cluster replaced\n$ \n`}</code></pre>\n    <p>{`Now, we have 3 users created and will use the htpasswd for the authentication. Both `}<strong parentName=\"p\">{`alice`}</strong>{` and `}<strong parentName=\"p\">{`bob`}</strong>{` logged in the cluster successfully with their password.  However, the user `}<strong parentName=\"p\">{`claire`}</strong>{` has not logged in the cluster yet.\nAt this moment, here is what you see with oc commands.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc --user=admin get users\nNAME     UID                                    FULL NAME        IDENTITIES\nalice    962fdf1e-1848-11ea-a3e1-0a580a80011d                    Local Password:alice\nbob      d0d4f046-1845-11ea-a3e1-0a580a80011d                    Local Password:bob\n\n$\n$ oc --user=admin get identities\nNAME                                                                                                          IDP NAME         IDP USER NAME                                                                                    USER NAME   USER UID\nLocal Password:alice                                                                                          Local Password   alice                                                                                            alice       962fdf1e-1848-11ea-a3e1-0a580a80011d\nLocal Password:bob                                                                                            Local Password   bob                                                                                              bob         d0d4f046-1845-11ea-a3e1-0a580a80011d\n$ \n`}</code></pre>\n    <p>{`No user or identity for `}<strong parentName=\"p\">{`claire`}</strong>{` appears because user objects are created on first login.  `}</p>\n    <h2>{`Disable kubeadmin Account`}</h2>\n    <p>{`Since you will not need the kubeadmin account to be active in you OpenShift cluster any more, you would disable the kubeadmin account by removing the password secret.`}<br parentName=\"p\"></br>{`\n`}{`Here are the steps to disable the `}<strong parentName=\"p\">{`kubeadmin`}</strong>{` account.  `}</p>\n    <h3>{`Set up cluster admin access to your user ID.`}</h3>\n    <p>{`Before you disable the kubeadmin account, you need to set up the cluster admin access to your user.`}<br parentName=\"p\"></br>{`\n`}{`Copy the kubeconfig created by the OpenShift installation to your user’s ~/.kube/config location.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ cp -p <OCP_installation_dir>/auth/kubeconfig <your_user_$HOME>/.kube/config\n`}</code></pre>\n    <p>{`Login with your user and run oc whoami command as follow.  In our case, our user is `}<strong parentName=\"p\">{`bob`}</strong>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc login -u bob -p p4ssw0rd\nLogin successful.\n\nYou don't have any projects. You can try to create a new project, by running\n\n    oc new-project <projectname>\n\n$ \n$ oc whoami\nbob\n$ \n`}</code></pre>\n    <p>{`Then, you will run the oc command with `}<strong parentName=\"p\">{`—user=admin`}</strong>{` option to confirm that your kubeconfig admin user corresponds to the system:admin cluster account as follow.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc --user=admin whoami\nsystem:admin\n$ \n`}</code></pre>\n    <p>{`Now, you have an access as the system:admin account using the kubeconfig installer file.`}</p>\n    <h3>{`Delete the kubeadmin secret from the kube-system namespace.`}</h3>\n    <p>{`Here is the command output in our environment.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc --user=admin delete secret kubeadmin -n kube-system\nsecret \"kubeadmin\" deleted\n`}</code></pre>\n    <h3>{`Confirm that the kubeadmin user is no longer accessible.`}</h3>\n    <p>{`You need to have the password of `}<strong parentName=\"p\">{`kubeadmin`}</strong>{` user to login via cli.  You can find it in the kubeadmin-password file under the <installation_dir>/auth directory.  `}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`cat <installation_dir>/auth/kubeadmin-password\n`}</code></pre>\n    <p>{`You can get the API URL with oc command as follow.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$oc whoami --show-server\n`}</code></pre>\n    <p>{`Then, you run oc login command with the `}<strong parentName=\"p\">{`kubeadmin`}</strong>{` user.`}<br parentName=\"p\"></br>{`\n`}{`Here is the command output in our environment.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc login -u kubeadmin -p \"$KUBEADMIN_PASSWORD\" \"$API_URL\"\nLogin failed (401 Unauthorized)\nVerify you have provided correct credentials.\n`}</code></pre>\n    <h3>{`Confirm that system:admin account is still available with the TLS authentication.`}</h3>\n    <p>{`Run oc command with `}<strong parentName=\"p\">{`—user=admin`}</strong>{` to confirm that the system:admin account is still available as follow.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc --user=admin whoami\nsystem:admin\n$ \n`}</code></pre>\n    <h2>{`Maintain (Add/Remove) Users as Day 2 operation`}</h2>\n    <p>{`At the moment, you complete the user onboarding task with an HTPasswd identity provider.  As Day 2 operation, you may need to maintain users in your cluster, for example, you would periodically add/remove users due to the organization changes, job assigment changes, leave company, etc.  You probably would like to do such task as a batch job and run it once a day at night, for example.  We will show you how to do it. `}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}